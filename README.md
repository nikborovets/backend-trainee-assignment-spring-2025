# Backend Trainee Assignment - –°–µ—Ä–≤–∏—Å –ü–í–ó

> –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –æ—Ç–±–æ—Ä–∞ –Ω–∞ —Å—Ç–∞–∂–∏—Ä–æ–≤–∫—É –≤ –ê–≤–∏—Ç–æ (–í–µ—Å–Ω–∞ 2025).

–ü—Ä–æ–µ–∫—Ç —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ü—É–Ω–∫—Ç–∞–º–∏ –í—ã–¥–∞—á–∏ –ó–∞–∫–∞–∑–æ–≤ (–ü–í–ó) –¥–ª—è –ê–≤–∏—Ç–æ, —Ä–µ–∞–ª–∏–∑—É–µ–º—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –ß–∏—Å—Ç–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ Go.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –ß–∏—Å—Ç–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å —á–µ—Ç–∫–∏–º–∏ —Å–ª–æ—è–º–∏:
- **Entities**: –ë–∏–∑–Ω–µ—Å-–æ–±—ä–µ–∫—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞
- **Use Cases**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Interfaces**: –ê–¥–∞–ø—Ç–µ—Ä—ã –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- **Infrastructure**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```sh
   git clone https://github.com/nikborovets/backend-trainee-assignment-spring-2025.git
   cd backend-trainee-assignment-spring-2025
   ```

2. **–ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë —á–µ—Ä–µ–∑ Docker:**
   ```sh
   docker compose up --build -d
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∂–∏–≤:**
   ```sh
   curl -i http://localhost:8080/ping
   # –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å {"message":"pong"}
   ```

4. **Swagger/OpenAPI:**  
   –û–ø–∏—Å–∞–Ω–∏–µ API ‚Äî –≤ —Ñ–∞–π–ª–µ `swagger.yaml` (–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ Swagger Editor).

5. **–ü–æ–ª—É—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π JWT:**
   ```sh
   curl -X POST http://localhost:8080/dummyLogin -H 'Content-Type: application/json' -d '{"role":"moderator"}'
   curl -X POST http://localhost:8080/dummyLogin -H 'Content-Type: application/json' -d '{"role":"pvz_staff"}'
   ```

6. **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
   - –°–æ–∑–¥–∞—Ç—å –ü–í–ó:
     ```sh
     curl -X POST http://localhost:8080/pvz/ -H 'Authorization: Bearer <TOKEN>' -H 'Content-Type: application/json' -d '{"city":"–ú–æ—Å–∫–≤–∞"}'
     ```
   - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ü–í–ó:
     ```sh
     curl -X GET http://localhost:8080/pvz/ -H 'Authorization: Bearer <TOKEN>'
     ```
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏—ë–º–∫—É:
     ```sh
     curl -X POST http://localhost:8080/receptions/ -H 'Authorization: Bearer <TOKEN>' -H 'Content-Type: application/json' -d '{"pvzId":"<PVZ_ID>"}'
     ```
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä:
     ```sh
     curl -X POST http://localhost:8080/products/ -H 'Authorization: Bearer <TOKEN>' -H 'Content-Type: application/json' -d '{"type":"—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞","pvzId":"<PVZ_ID>"}'
     ```
   - –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏—ë–º–∫—É:
     ```sh
     curl -X POST http://localhost:8080/pvz/<PVZ_ID>/close_last_reception -H 'Authorization: Bearer <TOKEN>'
     ```
   - –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–æ–≤–∞—Ä:
     ```sh
     curl -X POST http://localhost:8080/pvz/<PVZ_ID>/delete_last_product -H 'Authorization: Bearer <TOKEN>'
     ```

7. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å:**
   ```sh
   docker compose down
   ```

## –ü–æ—Ä—Ç—ã

- **HTTP API**: 8080
- **gRPC**: 3000
- **Prometheus**: 9000

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è production-–∫–æ–¥–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∞—Ö –≤ test/* –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```sh
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
go test -v ./test/...

# –ü–æ–∫—Ä—ã—Ç–∏–µ production-–∫–æ–¥–∞ (–≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ internal) —Ç–µ—Å—Ç–∞–º–∏ –∏–∑ test/*
go test -coverpkg=./internal/... ./test/...

go test -coverpkg=./internal/... -coverprofile=cover.out ./test/...
go tool cover -func=cover.out

go tool cover -html=cover.out
```

> –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ internal/*, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—É–¥–µ—Ç –æ–±—ã—á–Ω–æ–≥–æ go test -cover ./... –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è.

**P.S.**
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî –≤ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏).
- –î–ª—è CI/CD, Prometheus, gRPC ‚Äî —Å–º. –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –≤ README.
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏: `docker compose logs --tail=100 app`
- –î–ª—è Swagger UI: https://editor.swagger.io/ (–∑–∞–≥—Ä—É–∑–∏ swagger.yaml)

## –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- [x] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**
  - [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
  - [x] –°–æ–∑–¥–∞–Ω–∏–µ .gitignore
  - [x] –°–æ–∑–¥–∞–Ω–∏–µ PUML-–¥–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ (–ß–ê)
  - [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
    - [x] –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π: cmd/service, internal/entities, internal/usecases, internal/interfaces, internal/infrastructure, configs, test
    - [x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è go.mod (Go module)
    - [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
  - [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker –∏ Docker Compose

- [x] **Domain Layer (Entities)**
  - [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö (User, PVZ, Reception, Product)
  - [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

- [x] **Use Cases**
  - [x] CreatePVZ (—Å–æ–∑–¥–∞–Ω–∏–µ –ü–í–ó)
  - [x] CreateReception (—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∫–∏)
  - [x] AddProduct (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞)
  - [x] DeleteLastProductUseCase (—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ç–æ–≤–∞—Ä–∞ LIFO)
  - [x] CloseReceptionUseCase (–∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏—ë–º–∫–∏)
  - [x] ListPVZsUseCase (–ª–∏—Å—Ç–∏–Ω–≥ –ü–í–ó —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
  - [x] DummyLoginUseCase (–≤—ã–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–∞ –ø–æ —Ä–æ–ª–∏, –±–µ–∑ –ø–∞—Ä–æ–ª—è)
  - [x] LoginUseCase (–ª–æ–≥–∏–Ω –ø–æ email+–ø–∞—Ä–æ–ª—å)
  - [x] RegisterUseCase (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  - [x] –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (–µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è –≤ /pvz)

- [x] **Interfaces Layer**
  - [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
  - [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
  - [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DTO
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ DTO: UserDTO, PVZDTO, FullPVZDTO, ReceptionDTO, ProductDTO, ReceptionWithProductsDTO, RegisterRequest, LoginRequest, ListParams, AddProductRequest (internal/interfaces/dto.go)
    - [x] –í—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã: UserRepository, PVZRepository, ReceptionRepository, ProductRepository (internal/interfaces/repository.go)
    - [x] –í—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã: AuthController, PVZController, ReceptionController, ProductController (internal/interfaces/*_controller.go) ‚Äî —Å—Ç—Ä–æ–≥–æ –ø–æ .puml –∏ –¢–ó

- [x] **Infrastructure Layer**
  - [x] **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
    - [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL (–º–∏–≥—Ä–∞—Ü–∏–∏, FK, –∏–Ω–¥–µ–∫—Å—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ PG-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: User, PVZ, Reception, Product (internal/infrastructure/repositories)
    - [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Squirrel, –±–µ–∑ ORM, —Ç–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–π SQL
    - [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (test/infrastructure/repositories), –ø–æ–∫—Ä—ã—Ç–∏–µ >75%
    - [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤: –≤—Å—ë —Ä–∞–∑–Ω–µ—Å–µ–Ω–æ –ø–æ –ø–æ–¥–ø–∞–ø–∫–∞–º, –Ω–µ—Ç –∫–∞—à–∏
  - [x] **HTTP —Å–µ—Ä–≤–µ—Ä**
    - [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP —Å–µ—Ä–≤–µ—Ä–∞ (Gin)
    - [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      - [x] POST /dummyLogin
      - [x] POST /register
      - [x] POST /login
    - [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ü–í–ó
      - [x] POST /pvz
      - [x] GET /pvz
      - [x] POST /pvz/{pvzId}/close_last_reception
      - [x] POST /pvz/{pvzId}/delete_last_product
    - [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø—Ä–∏–µ–º–∫–∏
      - [x] POST /receptions
    - [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
      - [x] POST /products

- [x] **–¢–µ—Å—Ç—ã**
  - [x] Unit-—Ç–µ—Å—Ç—ã (–ø–æ–∫—Ä—ã—Ç–∏–µ > 75%)
  - [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è —Ä–∞–±–æ—Ç—ã —Å –ü–í–ó –∏ —Ç–æ–≤–∞—Ä–∞–º–∏ (—Ä—É—á–Ω–æ–π –ø—Ä–æ–≥–æ–Ω ‚Äî –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, curl-—Å–∫—Ä–∏–ø—Ç—ã –µ—Å—Ç—å)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è

- [x] **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
  - [x] –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏–Ω)

- [ ] **GRPC**
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ gRPC —Å–µ—Ä–≤–µ—Ä–∞
  - [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ GetPVZList

- [ ] **–ú–µ—Ç—Ä–∏–∫–∏ Prometheus**
  - [ ] –°–±–æ—Ä —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞)
  - [ ] –°–±–æ—Ä –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ü–í–ó, –ø—Ä–∏–µ–º–æ–∫, —Ç–æ–≤–∞—Ä–æ–≤)
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ /metrics

- [ ] **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

- [ ] **–ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ DTO –ø–æ OpenAPI —Å—Ö–µ–º–µ
